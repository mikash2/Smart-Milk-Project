# MySQL
HOST_MYSQL_PORT=3307
MYSQL_ROOT_PASSWORD=lirazmika
MYSQL_DATABASE=users_db
MYSQL_USER=milkuser
MYSQL_PASSWORD=Milk123!


# Email (SMTP)

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=smartmilk0@gmail.com
SMTP_PASS=anhj eyop wsxy iouh        # rotate this later; keep .env out of git 
FROM_EMAIL=Smart Milk <smartmilk0@gmail.com>


# Alerts
ALERT_COOLDOWN_MIN=60
DRY_RUN_EMAIL=false

# ======= Ingestion controls =======
SAVE_MIN_INTERVAL_S   = int(os.getenv("SAVE_MIN_INTERVAL_S", "60"))   # write at most once per N seconds
IGNORE_ZERO_WEIGHTS   = os.getenv("IGNORE_ZERO_WEIGHTS", "1") == "1"  # skip weight==0 readings (lifted bottle)
NOISE_EPSILON_G       = float(os.getenv("NOISE_EPSILON_G", "0"))      # optional: ignore tiny changes (< epsilon)

# Shared state for throttled saves
_last_saved_monotonic = 0.0
_last_seen_weight     = None     # latest non-zero weight we observed
_state_lock           = threading.Lock()

